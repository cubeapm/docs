---
sidebar_position: 7
slug: /infra-monitoring/varnish-cache
---

# Varnish Cache

CubeAPM provides built-in dashboards for monitoring Varnish Cache. Since OpenTelemetry collector does not provide support for Varnish yet, CubeAPM Varnish dashboards are based on metrics generated by the [Prometheus Varnish Exporter](https://github.com/jonnenauha/prometheus_varnish_exporter/).

To inetgrate Varnish with CubeAPM, we need to follow the below steps:

1. Install Prometheus Varnish Exporter, following the documentation provided in the [README](https://github.com/jonnenauha/prometheus_varnish_exporter/blob/master/README.md). This exporter will create a HTTP listener on port `9131`, which will expose metrics at `/metrics` path.

2. Install and configure OpenTelemetry Collector to scrape these metrics and send them to CubeAPM. The guide is available [here](6_prometheus.md).

## Troubleshooting

Run the following command on the server running Prometheus Varnish Exporter to check if metrics are getting generated:

```shell
curl -v 'http://localhost:9131/metrics'
```

If metrics are getting generated but not showing up in CubeAPM, check the logs of OTel Collector.
