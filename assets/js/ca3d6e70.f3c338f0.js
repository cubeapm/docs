"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4832],{821:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>m,frontMatter:()=>s,metadata:()=>i,toc:()=>l});var r=t(4848),o=t(8453);const s={id:"javascript-browser",title:"JavaScript (browser)",slug:"/instrumentation/javascript-browser"},a=void 0,i={id:"instrumentation/javascript-browser",title:"JavaScript (browser)",description:"Installation",source:"@site/docs/instrumentation/browser.md",sourceDirName:"instrumentation",slug:"/instrumentation/javascript-browser",permalink:"/instrumentation/javascript-browser",draft:!1,unlisted:!1,editUrl:"https://github.com/cubeapm/docs/docs/docs/instrumentation/browser.md",tags:[],version:"current",frontMatter:{id:"javascript-browser",title:"JavaScript (browser)",slug:"/instrumentation/javascript-browser"},sidebar:"tutorialSidebar",previous:{title:"Instrumentation",permalink:"/instrumentation"},next:{title:"Java",permalink:"/instrumentation/java"}},c={},l=[{value:"Installation",id:"installation",level:2}];function p(e){const n={code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Install dependencies"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"npm install \\\n@opentelemetry/api \\\n@opentelemetry/auto-instrumentations-web \\\n@opentelemetry/context-zone \\\n@opentelemetry/core \\\n@opentelemetry/exporter-trace-otlp-proto \\\n@opentelemetry/instrumentation \\\n@opentelemetry/resources \\\n@opentelemetry/sdk-trace-web \\\n@opentelemetry/semantic-conventions\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Add the following into your web project's main file:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:'import { diag, DiagConsoleLogger, DiagLogLevel } from "@opentelemetry/api";\nimport { getWebAutoInstrumentations } from "@opentelemetry/auto-instrumentations-web";\nimport { ZoneContextManager } from "@opentelemetry/context-zone";\nimport { W3CTraceContextPropagator } from "@opentelemetry/core";\nimport { OTLPTraceExporter } from "@opentelemetry/exporter-trace-otlp-proto";\nimport { registerInstrumentations } from "@opentelemetry/instrumentation";\nimport { Resource } from "@opentelemetry/resources";\nimport {\n  BatchSpanProcessor,\n  ConsoleSpanExporter,\n  SimpleSpanProcessor,\n  WebTracerProvider,\n} from "@opentelemetry/sdk-trace-web";\nimport { SemanticResourceAttributes } from "@opentelemetry/semantic-conventions";\n\nconst CUBE_DEBUG = false;\nconst CUBE_SERVICE_NAME = "cubeapm-web";\nconst CUBE_EXPORTER_OTLP_TRACES_ENDPOINT = "http://localhost:4318/v1/traces";\nconst CUBE_PROPAGATE_TRACE_HEADER_CORS_URLS = [/^http:\\/\\/localhost:8080\\//];\n\nif (CUBE_DEBUG) {\n  diag.setLogger(new DiagConsoleLogger(), DiagLogLevel.DEBUG);\n}\n\nconst provider = new WebTracerProvider({\n  resource: new Resource({\n    [SemanticResourceAttributes.SERVICE_NAME]: CUBE_SERVICE_NAME,\n  }),\n});\nif (CUBE_DEBUG) {\n  provider.addSpanProcessor(\n    new SimpleSpanProcessor(new ConsoleSpanExporter())\n  );\n} else {\n  provider.addSpanProcessor(\n    new BatchSpanProcessor(\n      new OTLPTraceExporter({\n        url: CUBE_EXPORTER_OTLP_TRACES_ENDPOINT,\n      })\n    )\n  );\n}\nprovider.register({\n  contextManager: new ZoneContextManager(),\n  propagator: new W3CTraceContextPropagator(),\n});\nregisterInstrumentations({\n  instrumentations: getWebAutoInstrumentations({\n    "@opentelemetry/instrumentation-user-interaction": {\n      enabled: false,\n    },\n    "@opentelemetry/instrumentation-fetch": {\n      propagateTraceHeaderCorsUrls: CUBE_PROPAGATE_TRACE_HEADER_CORS_URLS,\n    },\n    "@opentelemetry/instrumentation-xml-http-request": {\n      propagateTraceHeaderCorsUrls: CUBE_PROPAGATE_TRACE_HEADER_CORS_URLS,\n    },\n  }),\n});\n\n// Your code starts here\nReactDOM.createRoot(document.getElementById("root") as HTMLElement).render(\n  <React.StrictMode>\n    <Provider store={store}>\n        <BrowserRouter>\n          <App />\n        </BrowserRouter>\n    </Provider>\n  </React.StrictMode>\n);\n'})}),"\n"]}),"\n"]})]})}function m(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>i});var r=t(6540);const o={},s=r.createContext(o);function a(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);